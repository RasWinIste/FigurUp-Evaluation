{% extends 'base.html' %}

{% block head %}
    <link rel="stylesheet" href="{{ url_for('static', filename='auth.css') }}">
{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-box">
        <h1>Vos informations</h1>

        {% if form_type == 'particulier' %}
            <form method="post" id="form-particulier" class="form-type">
                <div class="fields">
                    <div class="field">
                        <label for="firstname">Prénom</label>
                        <input type="text" id="firstname" name="firstname" value="{{ client.prive.firstname }}" required>
                    </div>
                    <div class="field">
                        <label for="lastname">Nom</label>
                        <input type="text" id="lastname" name="lastname" value="{{ client.prive.lastname }}" required>
                    </div>
                </div>

                <div class="fields">
                    <div class="field">
                        <label for="mail">Adresse mail</label>
                        <input type="email" id="mail" name="mail" value="{{ client.mail }}" required>
                    </div>
                    <div class="field">
                        <label for="phone">Téléphone</label>
                        <input type="tel" id="phone" name="phone" value="{{ client.prive.phone }}" required>
                    </div>
                </div>

                <h3>Adresse</h3>
                <div class="fields">
                    <div class="field">
                        <label for="street">Rue</label>
                        <input type="text" id="street" name="street" value="{{ client.adresse.street }}" required>
                    </div>
                    <div class="field">
                        <label for="number">Numéro</label>
                        <input type="text" id="number" name="number" value="{{ client.adresse.number }}" required>
                    </div>
                </div>

                <div class="fields">
                    <div class="field">
                        <label for="city">Ville</label>
                        <input type="text" id="city" name="city" value="{{ client.adresse.city }}" required>
                    </div>
                    <div class="field">
                        <label for="postalCode">Code postal</label>
                        <input type="number" id="postalCode" name="postalCode" value="{{ client.adresse.postalCode }}" required>
                    </div>
                </div>

                <div class="fields">
                    <div class="field">
                        <label for="country">Pays</label>
                        <input type="text" id="country" name="country" value="{{ client.adresse.country }}" required>
                    </div>
                </div>

                <button type="submit">Modifier</button>
            </form>
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}

        {% elif form_type == 'professionnel' %}
            <form method="post" id="form-professionnel" class="form-type">
                <h3>Personne de contact</h3>
                <div class="fields">
                    <div class="field">
                        <label for="firstname">Prénom</label>
                        <input type="text" id="firstname" name="firstname" value="{{ client.professionnel.firstname }}" required>
                    </div>
                    <div class="field">
                        <label for="lastname">Nom</label>
                        <input type="text" id="lastname" name="lastname" value="{{ client.professionnel.lastname }}" required>
                    </div>
                </div>

                <div class="fields">
                    <div class="field">
                        <label for="mail">Adresse mail</label>
                        <input type="email" id="mail" name="mail" value="{{ client.mail }}" required>
                    </div>
                    <div class="field">
                        <label for="phone">Téléphone</label>
                        <input type="tel" id="phone" name="phone" value="{{ client.professionnel.phone }}" required>
                    </div>
                </div>

                <h2>Entreprise</h2>
                <div class="fields">
                    <div class="field">
                        <label for="name">Nom</label>
                        <input type="text" id="name" name="name" value="{{ client.professionnel.name }}" required>
                    </div>
                    <div class="field">
                        <label for="tva">Numéro de TVA</label>
                        <input type="text" id="tva" name="tva" value="{{ client.professionnel.tva }}" required>
                    </div>
                </div>
                <h3>Adresse</h3>
                <div class="fields">
                    <div class="field">
                        <label for="street">Rue</label>
                        <input type="text" id="street" name="street" value="{{ client.adresse.street }}" required>
                    </div>
                    <div class="field">
                        <label for="number">Numéro</label>
                        <input type="text" id="number" name="number" value="{{ client.adresse.number }}" required>
                    </div>
                </div>

                <div class="fields">
                    <div class="field">
                        <label for="city">Ville</label>
                        <input type="text" id="city" name="city" value="{{ client.adresse.city }}" required>
                    </div>
                    <div class="field">
                        <label for="postalCode">Code postal</label>
                        <input type="number" id="postalCode" name="postalCode" value="{{ client.adresse.postalCode }}" required>
                    </div>
                </div>

                <div class="fields">
                    <div class="field">
                        <label for="country">Pays</label>
                        <input type="text" id="country" name="country" value="{{ client.adresse.country }}" required>
                    </div>
                </div>
                <button type="submit">Modifier</button>
            </form>
            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="flash {{ category }}">{{ message }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}
        {% endif %}
    </div>
</div>
{% endblock %}
